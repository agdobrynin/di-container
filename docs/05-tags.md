# üîñ –†–∞–±–æ—Ç–∞ —Å —Ç–µ–≥–∞–º–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
–¢–µ–≥–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏,
—Å–æ–±–∏—Ä–∞—è —Å–µ—Ä–≤–∏—Å—ã –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (_—Å–ø–∏—Å–∫–∏_) –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å —Ç–∏–ø–æ–º `iterable` –∏ `array`.

–õ—é–±–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–º–µ—á–µ–Ω–æ
–æ–¥–Ω–∏–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–µ–≥–∞–º–∏.
–ö–∞–∂–¥—ã–π —Ç–µ–≥ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞.

–¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–Ω–æ –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –≤ —Å—Ç–∏–ª–µ [php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md)
–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è [PHP –∞—Ç—Ä–∏–±—É—Ç—ã](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md).

> #Ô∏è‚É£ –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ PHP –∞—Ç—Ä–∏–±—É—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —á—Ç–æ–±—ã
> –∫–ª–∞—Å—Å –±—ã–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —á–µ—Ä–µ–∑ —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏—é `diAutowire`

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ –∞—Ä–≥—É–º–µ–Ω—Ç—ã (_–ø–∞—Ä–∞–º–µ—Ç—Ä—ã - –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, –º–µ—Ç–æ–¥–∞ –∏–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏_) –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- `diTaggedAs` - [—Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏—é](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#ditaggedas) –≤ —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π 
- `#[TaggedAs]` - [php –∞—Ç—Ä–∏–±—É—Ç](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#taggedas) 

### –õ–µ–Ω–∏–≤–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ —Ç–æ–º —á—Ç–æ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é
–æ–Ω–∞ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–∞ –∫–∞–∫ "–ª–µ–Ω–∏–≤–∞—è" - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
—Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∫ –Ω–µ–º—É –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ–±—Ä–∞—â–µ–Ω–∏–µ.

–î–ª—è "–ª–µ–Ω–∏–≤–æ–π" –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —á—Ç–æ–±—ã —Ç–∏–ø –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
–∫—É–¥–∞ –±—É–¥–µ—Ç –ø–æ–º–µ—â–µ–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª `iterable`.
–í —Å–ª—É—á–∞–µ –µ—Å–ª–∏ —Ç–∏–ø –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `array` –∫—É–¥–∞ –±—É–¥–µ—Ç –ø–æ–º–µ—â—ë–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç
—Ç–æ —Ç–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–º–µ—Ç–∏—Ç—å —á—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è "–Ω–µ –ª–µ–Ω–∏–≤–∞—è", —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º
—Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞.

### –ö–ª—é—á —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (_container identifier_). –≠—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å
—á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç `$useKeys` [–≤ —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ diTaggedAs](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#ditaggedas)
–∏–ª–∏ —É [php –∞—Ç—Ä–∏–±—É—Ç–∞ #[TaggedAs]](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#taggedas).

–ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `$useKeys = false` —Ç–æ –∫–ª—é—á —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º,
–∏–¥–µ–∫—Å —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –æ—Ç –Ω—É–ª—è –∏ –±–æ–ª—å—à–µ.

## üêò –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞ –≤ —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π.

–î–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Ç–µ–≥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `bindTag`
–∫–æ—Ç–æ—Ä—ã–π –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ [—Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#%D0%BE%D0%B1%D1%8A%D1%8F%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-%D1%85%D1%8D%D0%BB%D0%BF%D0%B5%D1%80-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8)
—Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
- `Kaspi\DiContainer\Interfaces\DiDefinition\DiDefinitionTagArgumentInterface`
- `Kaspi\DiContainer\Interfaces\DiDefinition\DiDefinitionArgumentsInterface`
- `Kaspi\DiContainer\Interfaces\DiDefinition\DiDefinitionConfigAutowireInterface`

```php
bindTag(string $name, array $options = [], null|int|string $priority = null)
```

–ê—Ä–≥—É–º–µ–Ω—Ç—ã:
- `$name` - –∏–º—è —Ç–µ–≥–∞
- `$options` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–≥–∞
- `$priority` - [–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏](#–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç-–≤-–∫–æ–ª–ª–µ–∫—Ü–∏–∏) —Ç–µ–≥–æ–≤

ü§ù –°–æ–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—é —Ç–µ–≥–æ–≤ –∏ –∫–ª—é—á–µ–π –º–∞—Å—Å–∏–≤–∞ —É –∞—Ä–≥—É–º–µ–Ω—Ç–∞ `$options`.
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã
- —Ä–∞–∑–¥–µ–ª—è—Ç—å —Å–∏–º–≤–æ–ª–æ–º –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ "_" —á–∞—Å—Ç–∏ –∏–º–µ–Ω–∏ –µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª–æ–≤.
- —Ä–∞–∑–¥–µ–ª—è—Ç—å —Å–∏–º–≤–æ–ª–æ–º —Ç–æ—á–∫–∞ "." –≥—Ä—É–ø–ø—ã –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏

–ù–∞–ø—Ä–∏–º–µ—Ä:
```php
use function Kaspi\DiContainer\diAutowire;
// –≤ —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
diAutowire(SomeClass::class)
    ->bindTag(
        'tags.any_service',
         options: [
            'some_info.data' => 'foo',
            'some_info.current_value' => 'baz',
        ]
     );
```
```php
// —á–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç—ã
use Kaspi\DiContainer\Attributes\Tag;
 
#[Tag(
    'tags.any_service',
    options: [
        'some_info.data' => 'foo',
        'some_info.current_value' => 'baz',
    ]
)]
final class SomeClass {}
```

> üîî –ê—Ä–≥—É–º–µ–Ω—Ç `$options` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
–¥–ª—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ–≥–æ —Ç–µ–≥–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤–æ–º.
–ö–ª—é—á –º–∞—Å—Å–∏–≤–∞ `$options` —ç—Ç–æ –Ω–µ–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π php —Ç–∏–ø (_`string`, `int`, `bool`, `null` –∏–ª–∏ `array` –∏–∑ —ç—Ç–∏—Ö —Ç–∏–ø–æ–≤_).

> ‚ö† –î–ª—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞ `$options` –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω –∫–ª—é—á –º–∞—Å—Å–∏–≤–∞ `priority.method` - –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `string`.
> ```php
> ['priority.method' => 'someValue']
> ```
> –ó–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (_priority_) –¥–ª—è —Ç–µ–≥–∞ –µ—Å–ª–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω `priority`.
> –ú–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω –∫–∞–∫ `public static function`
> –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–∏–ø `int`, `string` –∏–ª–∏ `null`.
> –í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä–µ –º–µ—Ç–æ–¥ "someValue" –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:
>  - `string $tag` - –∏–º—è —Ç–µ–≥–∞;
>  - `array $options` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ–≥–∞;
>
> –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ [–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏](#–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç-–≤-–∫–æ–ª–ª–µ–∫—Ü–∏–∏).

üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–µ–π `diAutowire`:
```php
// –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
class One {}

class Two {}

class ServicesAny {

    public function __construct(private iterable $services) {}

}
```
```php
use Kaspi\DiContainer\DiContainerFactory;
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

$definitions = [
    diAutowire(One::class)
        ->bindTag(name: 'tags.service_any'),

    diAutowire(Two::class)
        ->bindTag(name: 'tags.service_any'),

    diAutowire(ServicesAny::class)
        ->bindArguments(services: diTaggedAs('tags.service_any')),
];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(ServicesAny::class);
// —Ç–µ–ø–µ—Ä—å –≤ —Å–≤–æ–π—Å—Ç–≤–µ `services` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏—Ç–µ—Ä–∏—Ä—É–µ–º–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
// –∏–∑ –∫–ª–∞—Å—Å–æ–≤ One, Two.
```
> ‚ö† –ï—Å–ª–∏ —Ç–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∫—É–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è `array`
> —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å "–Ω–µ –ª–µ–Ω–∏–≤–æ–µ" –ø–æ–ª—É—á–µ–Ω–∏–µ:
> ```php
> use function Kaspi\DiContainer\diTaggedAs;
> 
> diTaggedAs(tag: 'tags.service_any', isLazy: false)
> ```
#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç–∞–∫ –∂–µ **–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω–Ω—ã**:
```php
class AnyService {

    public function __construct(
        array ...$srvGroup
    ) {}

}
```
```php
use Kaspi\DiContainer\DiContainerFactory;
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

$definitions = [
    diAutowire(One::class)
        ->bindTag(name: 'tags.group_1'),

    diAutowire(Two::class)
        ->bindTag(name: 'tags.group_1'),

    diAutowire(Three::class)
        ->bindTag(name: 'tags.group_2'),

    diAutowire(Four::class)
        ->bindTag(name: 'tags.group_2'),

    diAutowire(AnyService::class)
        ->bindArguments(
            srvGroup: [
                // –∞—Ä–≥—É–º–µ–Ω—Ç –∏–º–µ–µ—Ç —Ç–∏–ø array —Ç–æ $isLazy=false
                diTaggedAs('tags.group_1', false),
                diTaggedAs('tags.group_2', false),
            ]
        ),
];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(AnyService::class);
/**
 * –í —Å–≤–æ–π—Å—Ç–≤–µ AnyService::$srvGroup[0] –±—É–¥—É—Ç –∫–ª–∞—Å—Å—ã One, Two.
 * –í —Å–≤–æ–π—Å—Ç–≤–µ AnyService::$srvGroup[1] –±—É–¥—É—Ç –∫–ª–∞—Å—Å—ã Three, Four.
 */
```

## #Ô∏è‚É£ –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞ —á–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç.
–î–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Ç–µ–≥–æ–≤ –¥–ª—è –∫–ª–∞—Å—Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å php –∞—Ç—Ä–∏–±—É—Ç `#[Tag]` ([–æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#tag)):

```php
use Kaspi\DiContainer\Attributes\Tag; 
namespace App\Any;

#[Tag(name: 'tags.services.group_one')]
#[Tag(name: 'tags.services.group_two', priority: 5)]
class One {}

#[Tag('tags.services.group_two', priority: 10)]
class Two {}
```
–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å php –∞—Ç—Ä–∏–±—É—Ç `#[TaggedAs]` ([–æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#taggedas)):
```php
use Kaspi\DiContainer\Attributes\TaggedAs;

namespace App\Services;

class GroupTwo {

    public function __construct(
        #[TaggedAs('tags.services.group_two')]
        private iterable $services
    ) {}

}
```
> #Ô∏è‚É£ –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ PHP –∞—Ç—Ä–∏–±—É—Ç—ã
> –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —á—Ç–æ–±—ã –∫–ª–∞—Å—Å –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π `#[Tag]` –±—ã–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
> –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —á–µ—Ä–µ–∑ —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏—é [diAutowire](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#diautowire)

```php
use Kaspi\DiContainer\DiContainerFactory;
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

$definitions = [

    diAutowire(One::class),

    diAutowire(Two::class),

];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(GroupTwo::class);
// —Ç–µ–ø–µ—Ä—å –≤ —Å–≤–æ–π—Å—Ç–≤–µ `services` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏—Ç–µ—Ä–∏—Ä—É–µ–º–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
// –∏–∑ –∫–ª–∞—Å—Å–æ–≤ Two, One - —Ç–∞–∫–æ–π –ø–æ—Ä—è–¥–æ–∫ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω
// –∑–Ω–∞—á–µ–Ω–∏–µ–º 'priority' —É php –∞—Ç—Ä–∏–±—É—Ç–∞ #[Tag]
```
#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç–∞–∫ –∂–µ **–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω–Ω—ã**:
```php
use Kaspi\DiContainer\Attributes\{Tag, TaggedAs};

class AnyService {

    public function __construct(
        // –∞—Ä–≥—É–º–µ–Ω—Ç –∏–º–µ–µ—Ç —Ç–∏–ø array —Ç–æ $isLazy=false
        #[TaggedAs('tags.group_1', false)]
        #[TaggedAs('tags.group_2', false)]
        array ...$srvGroup
    ) {}

}

#[Tag('tags.group_1')]
class One {}

#[Tag('tags.group_1')]
class Two {}

#[Tag('tags.group_2')]
class Three {}

#[Tag('tags.group_2')]
class Four {}
```
```php
use Kaspi\DiContainer\DiContainerFactory;
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

$definitions = [
    // –û–±—ä—è–≤–∏—Ç—å –∫–ª–∞—Å—Å —á—Ç–æ–±—ã –±—ã–ª–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º #[Tag]
    diAutowire(One::class),

    diAutowire(Two::class),

    diAutowire(Three::class),

    diAutowire(Four::class),
];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(AnyService::class);
/**
 * –í —Å–≤–æ–π—Å—Ç–≤–µ AnyService::$srvGroup[0] –±—É–¥—É—Ç –∫–ª–∞—Å—Å—ã One, Two.
 * –í —Å–≤–æ–π—Å—Ç–≤–µ AnyService::$srvGroup[1] –±—É–¥—É—Ç –∫–ª–∞—Å—Å—ã Three, Four.
 */
```
## Interface –∫–∞–∫ –∏–º—è —Ç–µ–≥–∞.
–í –∫–∞—á–µ—Å—Ç–≤–µ –∏–º–µ–Ω–∏ —Ç–µ–≥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (**FQCN - Fully Qualified Class Name**)
—Ä–µ–∞–ª–∏–∑—É–µ–º–æ–≥–æ –∫–ª–∞—Å—Å–∞–º–∏. –ß—Ç–æ–±—ã —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Å—Ä–∞–±–æ—Ç–∞–ª –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
—á—Ç–æ–±—ã –∫–ª–∞—Å—Å —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—ã–ª –æ–±—ä—è–≤–ª–µ–Ω
—á–µ—Ä–µ–∑ —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏—é [diAutowire](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#diautowire).

### üêò –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π

```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
namespace App\Rules;

interface RuleInterface {}

class RuleA implements RuleInterface {}

class RuleB implements RuleInterface {}

class RuleC {}
```

```php
namespace App\Services;

class SrvRules {

    public function __construct(
        private iterable $rules
    ) {}

}
```

```php
use Kaspi\DiContainer\DiContainerFactory;
use App\Rules\{RuleA, RuleB, RuleC, RuleInterface};
use App\Services\SrvRules;
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

// –û–±—ä—è–≤–∏—Ç—å –∫–ª–∞—Å—Å—ã 
$definitions = [

    diAutowire(RuleA::class),

    diAutowire(RuleB::class),

    diAutowire(RuleC::class),

    diAutowire(SrvRules::class)
        ->bindArguments(
            // —Å–æ–±—Ä–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
            rules: diTaggedAs(RuleInterface::class)
        )

];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(SrvRules::class);
// —Ç–µ–ø–µ—Ä—å –≤ —Å–≤–æ–π—Å—Ç–≤–µ `rules` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏—Ç–µ—Ä–∏—Ä—É–µ–º–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
// –∏–∑ –∫–ª–∞—Å—Å–æ–≤ RuleA, RuleB - —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä—É—é—Ç RuleInterface
```
> üìù –ü—Ä–∏ —Ç–∞–∫–æ–º –≤—ã–∑–æ–≤–µ –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
> —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º.
> 
> –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
> –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º `$priorityDefaultMethod` —É —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏:
> ```php
> use function Kaspi\DiContainer\diTaggedAs;
> 
> diTaggedAs(RuleInterface::class, priorityDefaultMethod: 'methodPriority')
> ```
> üó® –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ä–∞–∑–¥–µ–ª–µ [–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏](#prioritymethod-–∏-prioritydefaultmethod-–¥–ª—è-–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏-–≤-–∫–æ–ª–ª–µ–∫—Ü–∏–∏).

### #Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç—ã

```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
namespace App\Rules;

interface RuleInterface {}

class RuleA implements RuleInterface {}

class RuleB implements RuleInterface {}

class RuleC {}
```

```php
use App\Rules\RuleInterface;
use Kaspi\DiContainer\Attributes\TaggedAs;

namespace App\Services;

class SrvRules {

    public function __construct(
        #[TaggedAs(RuleInterface::class)]
        private iterable $rules
    ) {}

}
```

```php
use Kaspi\DiContainer\DiContainerFactory;
use App\Rules\{RuleA, RuleB, RuleC};
use App\Services\SrvRules;
use function Kaspi\DiContainer\diAutowire;

// –û–±—ä—è–≤–∏—Ç—å –∫–ª–∞—Å—Å—ã 
$definitions = [

    diAutowire(RuleA::class),

    diAutowire(RuleB::class),

    diAutowire(RuleC::class),

];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(SrvRules::class);
// —Ç–µ–ø–µ—Ä—å –≤ —Å–≤–æ–π—Å—Ç–≤–µ `rules` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏—Ç–µ—Ä–∏—Ä—É–µ–º–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
// –∏–∑ –∫–ª–∞—Å—Å–æ–≤ RuleA, RuleB - —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä—É—é—Ç RuleInterface
```
> üìù –ü—Ä–∏ —Ç–∞–∫–æ–º –≤—ã–∑–æ–≤–µ –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
> —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º.
>
> –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
> –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º `priorityDefaultMethod` —É php –∞—Ç—Ä–∏–±—É—Ç–∞:
> ```php
> #[TaggedAs(RuleInterface::class, priorityDefaultMethod: 'methodPriority')]
> ```
> üó® –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ä–∞–∑–¥–µ–ª–µ [–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏](#prioritymethod-–∏-prioritydefaultmethod-–¥–ª—è-–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏-–≤-–∫–æ–ª–ª–µ–∫—Ü–∏–∏).


## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫ –±—É–¥—É—Ç –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å–µ—Ä–≤–∏—Å—ã –≤ –ø–æ–ª—É—á–∞–µ–º–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
–ó–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∏–ø–∞–º `int`, `string`, `null`. 

**–ß–µ–º –±–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞, —Ç–µ–º –≤—ã—à–µ —Å–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.**

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª, —Ç–∞–∫ –∏ —Å—Ç—Ä–æ–∫.
–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–∞–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±–∞–π—Ç–æ–≤ —Å—Ç—Ä–æ–∫.

–ü–æ—Ä—è–¥–æ–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —É —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏:
1. –ó–Ω–∞—á–µ–Ω–∏–µ `priority` –æ—Ç–ª–∏—á–Ω–æ–µ –æ—Ç `null`.
2. –ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è php –∫–ª–∞—Å—Å–æ–º –∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç `priorityMethod`
—Ç–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `priority`
—á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞.
3. –ï—Å–ª–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ `diTaggedAs` –∏–ª–∏ —á–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç `#[TaggedAs]`
—É–∫–∞–∑–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `priorityDefaultMethod` –∏ –ø–æ–ª—É—á–∞–µ–º—ã–π —ç–ª–µ–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è php –∫–ª–∞—Å—Å–æ–º
—Ç–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `priority` —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤
–º–µ—Ç–æ–¥–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤ `priorityDefaultMethod`.
4. –µ—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–æ—Å—å –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ `priority` –±—É–¥–µ—Ç `null`

> üö© –ú–µ—Ç–æ–¥ —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ `priorityMethod` –∏ `priorityDefaultMethod`
> –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω –∫–∞–∫ `public static function`
> –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–∏–ø `int`, `string` –∏–ª–∏ `null`.
> –í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:
>  - `string $tag` - –∏–º—è —Ç–µ–≥–∞;
>  - `array $options` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ–≥–∞;
> 
> –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–µ—Ç–æ–¥–µ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –≤—ã–¥–∞—á–∏ `priority`.

### –û–ø—Ü–∏—è `priority`  –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.

#### üêò –í —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `$priority` —É [–º–µ—Ç–æ–¥–∞ `bindTag`](#-–æ–±—ä—è–≤–ª–µ–Ω–∏–µ-—Ç–µ–≥–∞-–≤-—Å—Ç–∏–ª–µ-php-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π) –∫–∞–∫ —É–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:

```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
namespace App\Rules;

interface RuleInterface {}

class RuleA implements RuleInterface {}

class RuleB implements RuleInterface {}

class RuleC implements RuleInterface {}
```

```php
use function \Kaspi\DiContainer\diAutowire;
use function \Kaspi\DiContainer\diTaggedAs;

$definitions = [
   diAutowire(App\Rules\RuleA::class)
        ->bindTag(name: 'tags.rules', priority: 10),
   
   diAutowire(App\Rules\RuleB::class)
        ->bindTag(name: 'tags.rules'),

   diAutowire(App\Rules\RuleC::class)
        ->bindTag(name: 'tags.rules', priority: 100),

    diAutowire(App\Rules\Rules::class)
        ->bindArguments(rules: diTaggedAs('tags.rules'))     
];
// –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Rules::$rules –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
// 1 - RuleC - priority === 100
// 2 - RuleA - priority === 10
// 3 - RuleB - priority === null
```
#### #Ô∏è‚É£ –ß–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç—ã

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `$priority` —É php –∞—Ç—Ä–∏–±—É—Ç–∞ `#[Tag]`
–∫–∞–∫ —É–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:

```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
namespace App\Rules;

use Kaspi\DiContainer\Attributes\Tag;
use Kaspi\DiContainer\Attributes\TaggedAs;

interface RuleInterface {}

#[Tag(name: 'tags.rules', priority: 10)]
class RuleA implements RuleInterface {}

#[Tag(name: 'tags.rules')]
class RuleB implements RuleInterface {}

#[Tag(name: 'tags.rules', priority: 100)]
class RuleC {} implements RuleInterface {}

class Rules {

    public function __construct(
        #[TaggedAs('tags.rules')]
        private iterable $rules
    ) {}

}
```

```php
use function Kaspi\DiContainer\diAutowire;

$definitions = [

   diAutowire(App\Rules\RuleA::class),

   diAutowire(App\Rules\RuleB::class),

   diAutowire(App\Rules\RuleC::class),

];
// –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Rules::$rules –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
// 1 - RuleC - priority === 100
// 2 - RuleA - priority === 10
// 3 - RuleB - priority === null
```

### `priorityMethod` –∏ `priorityDefaultMethod` –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
–£–∫–∞–∑–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–µ–≥–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `priority` –º–æ–∂–Ω–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º —Å–ø–æ—Å–æ–±–∞–º–∏ –µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —è–≤–ª—è–µ—Ç—Å—è php-–∫–ª–∞—Å—Å–æ–º:

- `priorityMethod` ‚Äì –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π `priority` —É —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ php –∫–ª–∞—Å—Å–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ —Ç–µ–≥–∞;
- `priorityDefaultMethod` ‚Äì –º–µ—Ç–æ–¥ —É–∫–∞–∑–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑
[—Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏—é `diTaggedAs`](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#ditaggedas)
–∏–ª–∏ —á–µ—Ä–µ–∑ [php –∞—Ç—Ä–∏–±—É—Ç #[TaggedAs]](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#taggedas)
–∫–æ—Ç–æ—Ä—ã–π **–º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω** –≤ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º php –∫–ª–∞—Å—Å–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π `priority`.
 
#### üêò –í —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–µ `$options` —É–∫–∞–∑–∞–≤ –≤ –º–∞—Å—Å–∏–≤–µ –∫–ª—é—á `priority.method` [—É –º–µ—Ç–æ–¥–∞ `bindTag`](#-–æ–±—ä—è–≤–ª–µ–Ω–∏–µ-—Ç–µ–≥–∞-–≤-—Å—Ç–∏–ª–µ-php-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π)
–∫–∞–∫ —É–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:
```php
['priority.method' => 'methodName']
```
–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è `priority.method`:
```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
namespace App\Rules;

interface RuleInterface {
    public static function getPriority(): int;
}

class RuleA implements RuleInterface {

    public static function getPriority(): int {
        return 10;
    }

}

class RuleB implements RuleInterface {

    public static function getPriority(): int {
        return 0;
    }

}

class RuleC {

    public static function getPriorityForCollection(string $tag): string|int|null {
        return match ($tag) {
            'tags.rules' => 100,
            'tags.other-name' => 'GROUP100:0001',
            default => null,
        };
    }

}
```

```php
use function \Kaspi\DiContainer\diAutowire;
use function \Kaspi\DiContainer\diTaggedAs;

$definitions = [
   diAutowire(App\Rules\RuleA::class) // —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ RuleInterface::getPriority
        ->bindTag(
            name: 'tags.rules',
            options: ['priority.method' => 'getPriority']
        ),

   diAutowire(App\Rules\RuleB::class) // —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ RuleInterface::getPriority
        ->bindTag(
            name: 'tags.rules',
            options: ['priority.method' => 'getPriority']
        ),

   diAutowire(App\Rules\RuleC::class)
        ->bindTag(name: 'tags.rules'), // –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º —è–≤–Ω–æ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ –ø–æ–ª—É—á–∞—Ç—å `priority`
                                       // –º–µ—Ç–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –≤ `diTaggedAs`.

    diAutowire(App\Rules\Rules::class)
        ->bindArguments(
            rules: diTaggedAs(
                'tags.rules',
                // –µ—Å–ª–∏ –Ω–µ—Ç `priority` –∏ `priority.method`
                // –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ - className::getPriorityForCollection() 
                priorityDefaultMethod: 'getPriorityForCollection'
            )
        )
];
// –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Rules::$rules –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
// 1 - RuleC::getPriorityForCollection() === 100
// 2 - RuleA::getPriority() === 10
// 3 - RuleB::getPriority() === 0
```
### #Ô∏è‚É£ –ß–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç—ã

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `$priorityMethod` —É php –∞—Ç—Ä–∏–±—É—Ç–∞ `#[Tag]`
–∫–∞–∫ —É–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:

```php
namespace App\Rules;

use Kaspi\DiContainer\Attributes\Tag;
use Kaspi\DiContainer\Attributes\TaggedAs;

#[Tag(name: 'tags.rules', priorityMethod: 'getPriority')]
class RuleA {

    public static function getPriority(): int {
        return 10;
    }

}

#[Tag(name: 'tags.rules', priorityMethod: 'getPriority')]
class RuleB {

    public static function getPriority(): int {
        return 0;
    }

}

// üö© –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è priority –∏ priorityMethod
// –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω —á–µ—Ä–µ–∑ priorityDefaultMethod
#[Tag(name: 'tags.rules')]
class RuleC {

    public static function getPriorityForCollection(string $tag): string|int|null {
        return match ($tag) {
            'tags.rules' => 100,
            'tags.other-name' => 'GROUP100:0001',
            default => null,
        };
    }

}

class Rules {

    public function __construct(
        #[TaggedAs(
            'tags.rules',
            // –µ—Å–ª–∏ –Ω–µ –æ–±—ä—è–≤–ª–µ–Ω `priority` –∏ `priorityMethod`
            // —Ç–æ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ `getPriorityForCollection` —É —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞
            priorityDefaultMethod: 'getPriorityForCollection'
        )]
        private iterable $rules
    ) {}

}

$definitions = [

   diAutowire(App\Rules\RuleA::class),

   diAutowire(App\Rules\RuleB::class),

   diAutowire(App\Rules\RuleC::class),

];
// –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
// 1 - RuleC::getPriorityForCollection() === 100
// 2 - RuleA::getPriority() === 10
// 3 - RuleB::getPriority() === 0 
```

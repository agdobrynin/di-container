# üîñ –†–∞–±–æ—Ç–∞ —Å —Ç–µ–≥–∞–º–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
–¢–µ–≥–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏,
—Å–æ–±–∏—Ä–∞—è —Å–µ—Ä–≤–∏—Å—ã –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (_—Å–ø–∏—Å–∫–∏_) –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å —Ç–∏–ø–æ–º `iterable` –∏ `array`.

–õ—é–±–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–º–µ—á–µ–Ω–æ
–æ–¥–Ω–∏–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–µ–≥–∞–º–∏.
–ö–∞–∂–¥—ã–π —Ç–µ–≥ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞.

–¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–Ω–æ –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –≤ —Å—Ç–∏–ª–µ [php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md)
–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è [PHP –∞—Ç—Ä–∏–±—É—Ç—ã](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md).

> #Ô∏è‚É£ –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ PHP –∞—Ç—Ä–∏–±—É—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —á—Ç–æ–±—ã
> –∫–ª–∞—Å—Å –±—ã–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —á–µ—Ä–µ–∑ —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏—é `diAutowire`

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ –∞—Ä–≥—É–º–µ–Ω—Ç—ã (_–ø–∞—Ä–∞–º–µ—Ç—Ä—ã - –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, –º–µ—Ç–æ–¥–∞ –∏–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏_) –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- `diTaggedAs` - [—Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏—é](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#ditaggedas) –≤ —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π 
- `#[TaggedAs]` - [php –∞—Ç—Ä–∏–±—É—Ç](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#taggedas) 

### –õ–µ–Ω–∏–≤–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ —Ç–æ–º —á—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
–æ–Ω–∞ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–∞ –∫–∞–∫ "–ª–µ–Ω–∏–≤–∞—è" - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
—Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∫ –Ω–µ–º—É –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ–±—Ä–∞—â–µ–Ω–∏–µ.

–î–ª—è "–ª–µ–Ω–∏–≤–æ–π" –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —á—Ç–æ–±—ã —Ç–∏–ø –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
–∫—É–¥–∞ –±—É–¥–µ—Ç –ø–æ–º–µ—â–µ–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª `iterable`.
–í —Å–ª—É—á–∞–µ –µ—Å–ª–∏ —Ç–∏–ø –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `array` –∫—É–¥–∞ –±—É–¥–µ—Ç –ø–æ–º–µ—â—ë–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç
—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–º–µ—Ç–∏—Ç—å —á—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è "–Ω–µ –ª–µ–Ω–∏–≤–∞—è", —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º
—Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∏ –ø–æ–º–µ—â–µ–Ω—ã –≤ php –º–∞—Å—Å–∏–≤.

### –ö–ª—é—á —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (_container identifier - –Ω–µ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞_). –≠—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å
—á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ã `$useKeys`, `$key`, `$keyDefaultMethod` [–≤ —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ diTaggedAs](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#ditaggedas)
–∏–ª–∏ —É [php –∞—Ç—Ä–∏–±—É—Ç–∞ #[TaggedAs]](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#taggedas) —á—Ç–æ–±—ã –∫–ª—é—á–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –±—ã–ª–∏ –æ—Ç–ª–∏—á–Ω—ã–º–∏
–æ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π (_container identifier_) –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ –ø—É—Å—Ç—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏
–∏–ª–∏ —Ü–µ–ª—ã–º–∏ —á–∏—Å–ª–∞–º–∏ (_–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç –Ω—É–ª—è –∏ –±–æ–ª—å—à–µ_).

–ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ [–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–ª—é—á–µ–π –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–∫–ª—é—á–µ–π-–≤-–∫–æ–ª–ª–µ–∫—Ü–∏–∏)

## üêò –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞ –≤ —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π.

–î–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Ç–µ–≥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `bindTag`
–∫–æ—Ç–æ—Ä—ã–π –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ [—Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#%D0%BE%D0%B1%D1%8A%D1%8F%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-%D1%85%D1%8D%D0%BB%D0%BF%D0%B5%D1%80-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8)
—Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
- `Kaspi\DiContainer\Interfaces\DiDefinition\DiDefinitionTagArgumentInterface`
- `Kaspi\DiContainer\Interfaces\DiDefinition\DiDefinitionArgumentsInterface`
- `Kaspi\DiContainer\Interfaces\DiDefinition\DiDefinitionConfigAutowireInterface`

```php
bindTag(string $name, array $options = [], null|int|string $priority = null)
```

–ê—Ä–≥—É–º–µ–Ω—Ç—ã:
- `$name` - –∏–º—è —Ç–µ–≥–∞
- `$options` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–≥–∞
- `$priority` - [–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏](#–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç-–≤-–∫–æ–ª–ª–µ–∫—Ü–∏–∏) —Ç–µ–≥–æ–≤

ü§ù –°–æ–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—é —Ç–µ–≥–æ–≤ –∏ –∫–ª—é—á–µ–π –º–∞—Å—Å–∏–≤–∞ —É –∞—Ä–≥—É–º–µ–Ω—Ç–∞ `$options`.
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã
- —Ä–∞–∑–¥–µ–ª—è—Ç—å —Å–∏–º–≤–æ–ª–æ–º –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ "_" —á–∞—Å—Ç–∏ –∏–º–µ–Ω–∏ –µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª–æ–≤.
- —Ä–∞–∑–¥–µ–ª—è—Ç—å —Å–∏–º–≤–æ–ª–æ–º —Ç–æ—á–∫–∞ "." –≥—Ä—É–ø–ø—ã –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏

–ù–∞–ø—Ä–∏–º–µ—Ä:
```php
use function Kaspi\DiContainer\diAutowire;
// –≤ —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
diAutowire(SomeClass::class)
    ->bindTag(
        'tags.any_service',
         options: [
            'some_info.data' => 'foo',
            'some_info.current_value' => 'baz',
        ]
     );
```
```php
// —á–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç—ã
use Kaspi\DiContainer\Attributes\Tag;
 
#[Tag(
    'tags.any_service',
    options: [
        'some_info.data' => 'foo',
        'some_info.current_value' => 'baz',
    ]
)]
final class SomeClass {}
```

> üîî –ê—Ä–≥—É–º–µ–Ω—Ç `$options` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
–¥–ª—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ–≥–æ —Ç–µ–≥–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤–æ–º.
–ö–ª—é—á –º–∞—Å—Å–∏–≤–∞ `$options` —ç—Ç–æ –Ω–µ–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π php —Ç–∏–ø (_`string`, `int`, `bool`, `null` –∏–ª–∏ `array` –∏–∑ —ç—Ç–∏—Ö —Ç–∏–ø–æ–≤_).

> ‚ö† –î–ª—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞ `$options` –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω –∫–ª—é—á –º–∞—Å—Å–∏–≤–∞ `priority.method` - –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `string`.
> ```php
> ['priority.method' => 'someValue']
> ```
> –ó–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (_priority_) –¥–ª—è —Ç–µ–≥–∞ –µ—Å–ª–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω `priority`.
> –ú–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω –∫–∞–∫ `public static function`
> –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–∏–ø `int`, `string` –∏–ª–∏ `null`.
> –í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä–µ –º–µ—Ç–æ–¥ "someValue" –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:
>  - `string $tag` - –∏–º—è —Ç–µ–≥–∞;
>  - `array $options` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ–≥–∞;
>
> –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ [–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏](#–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç-–≤-–∫–æ–ª–ª–µ–∫—Ü–∏–∏).

üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–µ–π `diAutowire`:
```php
// –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
class One {}

class Two {}

class TaggedServices {

    public function __construct(private iterable $services) {}

}
```
```php
use Kaspi\DiContainer\DiContainerFactory;
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

$definitions = [
    diAutowire(One::class)
        ->bindTag(name: 'tags.service_any'),

    diAutowire(Two::class)
        ->bindTag(name: 'tags.service_any'),

    diAutowire(TaggedServices::class)
        ->bindArguments(services: diTaggedAs('tags.service_any')),
];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(TaggedServices::class);
// —Ç–µ–ø–µ—Ä—å –≤ —Å–≤–æ–π—Å—Ç–≤–µ `TaggedServices::$services` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏—Ç–µ—Ä–∏—Ä—É–µ–º–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
// –∏–∑ –∫–ª–∞—Å—Å–æ–≤ One, Two.
```
> ‚ö† –ï—Å–ª–∏ —Ç–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∫—É–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è `array`
> —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å "–Ω–µ –ª–µ–Ω–∏–≤–æ–µ" –ø–æ–ª—É—á–µ–Ω–∏–µ:
> ```php
> use function Kaspi\DiContainer\diTaggedAs;
> 
> diTaggedAs(tag: 'tags.service_any', isLazy: false)
> ```
#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç–∞–∫ –∂–µ **–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω–Ω—ã**:
```php
class TaggedServices {

    public function __construct(
        array ...$srvGroup
    ) {}

}
```
```php
use Kaspi\DiContainer\DiContainerFactory;
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

$definitions = [
    diAutowire(One::class)
        ->bindTag(name: 'tags.group_1'),

    diAutowire(Two::class)
        ->bindTag(name: 'tags.group_1'),

    diAutowire(Three::class)
        ->bindTag(name: 'tags.group_2'),

    diAutowire(Four::class)
        ->bindTag(name: 'tags.group_2'),

    diAutowire(TaggedServices::class)
        ->bindArguments(
            srvGroup: [
                // –∞—Ä–≥—É–º–µ–Ω—Ç –∏–º–µ–µ—Ç —Ç–∏–ø array —Ç–æ $isLazy=false
                diTaggedAs('tags.group_1', false),
                diTaggedAs('tags.group_2', false),
            ]
        ),
];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(TaggedServices::class);
/**
 * –í —Å–≤–æ–π—Å—Ç–≤–µ TaggedServices::$srvGroup[0] –±—É–¥—É—Ç –∫–ª–∞—Å—Å—ã One, Two.
 * –í —Å–≤–æ–π—Å—Ç–≤–µ TaggedServices::$srvGroup[1] –±—É–¥—É—Ç –∫–ª–∞—Å—Å—ã Three, Four.
 */
```

## #Ô∏è‚É£ –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞ —á–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç.
–î–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Ç–µ–≥–æ–≤ –¥–ª—è –∫–ª–∞—Å—Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å php –∞—Ç—Ä–∏–±—É—Ç `#[Tag]` ([–æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#tag)):

```php
use Kaspi\DiContainer\Attributes\Tag; 
namespace App\Any;

#[Tag(name: 'tags.services.group_one')]
#[Tag(name: 'tags.services.group_two', priority: 5)]
class One {}

#[Tag('tags.services.group_two', priority: 10)]
class Two {}
```
–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å php –∞—Ç—Ä–∏–±—É—Ç `#[TaggedAs]` ([–æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#taggedas)):
```php
use Kaspi\DiContainer\Attributes\TaggedAs;

namespace App\Services;

class TaggedServices {

    public function __construct(
        #[TaggedAs('tags.services.group_two')]
        private iterable $services
    ) {}

}
```
> #Ô∏è‚É£ –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ PHP –∞—Ç—Ä–∏–±—É—Ç—ã
> –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —á—Ç–æ–±—ã –∫–ª–∞—Å—Å –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π `#[Tag]` –±—ã–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
> –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —á–µ—Ä–µ–∑ —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏—é [diAutowire](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#diautowire)

```php
use Kaspi\DiContainer\DiContainerFactory;
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

$definitions = [

    diAutowire(One::class),

    diAutowire(Two::class),

];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(TaggedServices::class);
// —Ç–µ–ø–µ—Ä—å –≤ —Å–≤–æ–π—Å—Ç–≤–µ `TaggedServices::$services` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏—Ç–µ—Ä–∏—Ä—É–µ–º–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
// –∏–∑ –∫–ª–∞—Å—Å–æ–≤ Two, One - —Ç–∞–∫–æ–π –ø–æ—Ä—è–¥–æ–∫ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω
// –∑–Ω–∞—á–µ–Ω–∏–µ–º 'priority' —É —Ç–µ–≥–æ–≤ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é
```
#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç–∞–∫ –∂–µ **–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω–Ω—ã**:
```php
use Kaspi\DiContainer\Attributes\{Tag, TaggedAs};

class TaggedServices {

    public function __construct(
        // –∞—Ä–≥—É–º–µ–Ω—Ç –∏–º–µ–µ—Ç —Ç–∏–ø array —Ç–æ $isLazy=false
        #[TaggedAs('tags.group_1', false)]
        #[TaggedAs('tags.group_2', false)]
        array ...$srvGroup
    ) {}

}

#[Tag('tags.group_1')]
class One {}

#[Tag('tags.group_1')]
class Two {}

#[Tag('tags.group_2')]
class Three {}

#[Tag('tags.group_2')]
class Four {}
```
```php
use Kaspi\DiContainer\DiContainerFactory;
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

$definitions = [
    // –û–±—ä—è–≤–∏—Ç—å –∫–ª–∞—Å—Å —á—Ç–æ–±—ã –±—ã–ª–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º #[Tag]
    diAutowire(One::class),

    diAutowire(Two::class),

    diAutowire(Three::class),

    diAutowire(Four::class),
];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(TaggedServices::class);
/**
 * –í —Å–≤–æ–π—Å—Ç–≤–µ TaggedServices::$srvGroup[0] –±—É–¥—É—Ç –∫–ª–∞—Å—Å—ã One, Two.
 * –í —Å–≤–æ–π—Å—Ç–≤–µ TaggedServices::$srvGroup[1] –±—É–¥—É—Ç –∫–ª–∞—Å—Å—ã Three, Four.
 */
```
## Interface –∫–∞–∫ –∏–º—è —Ç–µ–≥–∞.
–í –∫–∞—á–µ—Å—Ç–≤–µ –∏–º–µ–Ω–∏ —Ç–µ–≥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (**FQCN - Fully Qualified Class Name**)
—Ä–µ–∞–ª–∏–∑—É–µ–º–æ–≥–æ –∫–ª–∞—Å—Å–∞–º–∏. –ß—Ç–æ–±—ã —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Å—Ä–∞–±–æ—Ç–∞–ª –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
—á—Ç–æ–±—ã –∫–ª–∞—Å—Å —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—ã–ª –æ–±—ä—è–≤–ª–µ–Ω
—á–µ—Ä–µ–∑ —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏—é [diAutowire](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#diautowire).

### üêò –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π

```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
namespace App\Rules;

interface RuleInterface {}

class RuleA implements RuleInterface {}

class RuleB implements RuleInterface {}

class RuleC {}
```

```php
namespace App\Services;

class SrvRules {

    public function __construct(
        private iterable $rules
    ) {}

    public function validate(mixed $input): mixed {
        foreach ($this->rules as $rule) {
            $input = $rule->validate($input);
        }
        
        return $input;
    }
}
```

```php
use Kaspi\DiContainer\DiContainerFactory;
use App\Rules\{RuleA, RuleB, RuleC, RuleInterface};
use App\Services\SrvRules;
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

// –û–±—ä—è–≤–∏—Ç—å –∫–ª–∞—Å—Å—ã 
$definitions = [

    diAutowire(RuleA::class),

    diAutowire(RuleB::class),

    diAutowire(RuleC::class),

    diAutowire(SrvRules::class)
        ->bindArguments(
            // —Å–æ–±—Ä–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
            rules: diTaggedAs(RuleInterface::class)
        )

];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(SrvRules::class);
// —Ç–µ–ø–µ—Ä—å –≤ —Å–≤–æ–π—Å—Ç–≤–µ `SrvRules::$rules` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏—Ç–µ—Ä–∏—Ä—É–µ–º–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
// –∏–∑ –∫–ª–∞—Å—Å–æ–≤ RuleA, RuleB - —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä—É—é—Ç RuleInterface
```
> üìù –ü—Ä–∏ —Ç–∞–∫–æ–º –≤—ã–∑–æ–≤–µ –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
> —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º.
> 
> –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
> –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º `$priorityDefaultMethod` —É —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏:
> ```php
> use function Kaspi\DiContainer\diTaggedAs;
> 
> diTaggedAs(RuleInterface::class, priorityDefaultMethod: 'methodPriority')
> ```
> üó® –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ä–∞–∑–¥–µ–ª–µ [–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏](#prioritymethod-–∏-prioritydefaultmethod-–¥–ª—è-–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏-–≤-–∫–æ–ª–ª–µ–∫—Ü–∏–∏).

### #Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç—ã

```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
namespace App\Rules;

interface RuleInterface {}

class RuleA implements RuleInterface {}

class RuleB implements RuleInterface {}

class RuleC {}
```

```php
use App\Rules\RuleInterface;
use Kaspi\DiContainer\Attributes\TaggedAs;

namespace App\Services;

class SrvRules {

    public function __construct(
        #[TaggedAs(RuleInterface::class)]
        private iterable $rules
    ) {}

    public function validate(mixed $input): mixed {
        foreach ($this->rules as $rule) {
            $input = $rule->validate($input);
        }
        
        return $input;
    }
}
```

```php
use Kaspi\DiContainer\DiContainerFactory;
use App\Rules\{RuleA, RuleB, RuleC};
use App\Services\SrvRules;
use function Kaspi\DiContainer\diAutowire;

// –û–±—ä—è–≤–∏—Ç—å –∫–ª–∞—Å—Å—ã 
$definitions = [

    diAutowire(RuleA::class),

    diAutowire(RuleB::class),

    diAutowire(RuleC::class),

];

$container = (new DiContainerFactory())->make($definitions);
$class = $container->get(SrvRules::class);
// —Ç–µ–ø–µ—Ä—å –≤ —Å–≤–æ–π—Å—Ç–≤–µ `SrvRules::$rules` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏—Ç–µ—Ä–∏—Ä—É–µ–º–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
// –∏–∑ –∫–ª–∞—Å—Å–æ–≤ RuleA, RuleB - —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä—É—é—Ç RuleInterface
```
> üìù –ü—Ä–∏ —Ç–∞–∫–æ–º –≤—ã–∑–æ–≤–µ –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
> —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º.
>
> –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
> –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º `priorityDefaultMethod` —É php –∞—Ç—Ä–∏–±—É—Ç–∞:
> ```php
> #[TaggedAs(RuleInterface::class, priorityDefaultMethod: 'methodPriority')]
> ```
> üó® –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ä–∞–∑–¥–µ–ª–µ [–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏](#prioritymethod-–∏-prioritydefaultmethod-–¥–ª—è-–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏-–≤-–∫–æ–ª–ª–µ–∫—Ü–∏–∏).


## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫ –±—É–¥—É—Ç –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å–µ—Ä–≤–∏—Å—ã –≤ –ø–æ–ª—É—á–∞–µ–º–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
–ó–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∏–ø–∞–º `int`, `string`, `null`. 

**–ß–µ–º –±–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞, —Ç–µ–º –≤—ã—à–µ —Å–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.**

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª, —Ç–∞–∫ –∏ —Å—Ç—Ä–æ–∫.
–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–∞–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±–∞–π—Ç–æ–≤ —Å—Ç—Ä–æ–∫.

–ü–æ—Ä—è–¥–æ–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —É —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏:
1. –ó–Ω–∞—á–µ–Ω–∏–µ `priority` –æ—Ç–ª–∏—á–Ω–æ–µ –æ—Ç `null`.
2. –ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è php –∫–ª–∞—Å—Å–æ–º –∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç `priorityMethod`
—Ç–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `priority`
—á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞.
3. –ï—Å–ª–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ `diTaggedAs` –∏–ª–∏ —á–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç `#[TaggedAs]`
—É–∫–∞–∑–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `priorityDefaultMethod` –∏ –ø–æ–ª—É—á–∞–µ–º—ã–π —ç–ª–µ–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è php –∫–ª–∞—Å—Å–æ–º
—Ç–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `priority` —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤
–º–µ—Ç–æ–¥–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤ `priorityDefaultMethod`.
4. –µ—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–æ—Å—å –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ `priority` –±—É–¥–µ—Ç `null`

> üö© –ú–µ—Ç–æ–¥ —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ `priorityMethod` –∏ `priorityDefaultMethod`
> –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω –∫–∞–∫ `public static function`
> –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–∏–ø `int`, `string` –∏–ª–∏ `null`.
> –í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:
>  - `string $tag` - –∏–º—è —Ç–µ–≥–∞;
>  - `array $options` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ–≥–∞;
> 
> –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–µ—Ç–æ–¥–µ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –≤—ã–¥–∞—á–∏ `priority`.

### –û–ø—Ü–∏—è `priority`  –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.

#### üêò –í —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `$priority` —É [–º–µ—Ç–æ–¥–∞ `bindTag`](#-–æ–±—ä—è–≤–ª–µ–Ω–∏–µ-—Ç–µ–≥–∞-–≤-—Å—Ç–∏–ª–µ-php-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π) –∫–∞–∫ —É–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:

```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
namespace App\Rules;

interface RuleInterface {}

class RuleA implements RuleInterface {}

class RuleB implements RuleInterface {}

class RuleC implements RuleInterface {}
```

```php
use function \Kaspi\DiContainer\diAutowire;
use function \Kaspi\DiContainer\diTaggedAs;

$definitions = [
   diAutowire(App\Rules\RuleA::class)
        ->bindTag(name: 'tags.rules', priority: 10),
   
   diAutowire(App\Rules\RuleB::class)
        ->bindTag(name: 'tags.rules'),

   diAutowire(App\Rules\RuleC::class)
        ->bindTag(name: 'tags.rules', priority: 100),

    diAutowire(App\Rules\Rules::class)
        ->bindArguments(rules: diTaggedAs('tags.rules'))     
];
// –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Rules::$rules –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
// 1 - RuleC - priority === 100
// 2 - RuleA - priority === 10
// 3 - RuleB - priority === null
```
#### #Ô∏è‚É£ –ß–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç—ã

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `$priority` —É php –∞—Ç—Ä–∏–±—É—Ç–∞ `#[Tag]`
–∫–∞–∫ —É–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:

```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
namespace App\Rules;

use Kaspi\DiContainer\Attributes\Tag;
use Kaspi\DiContainer\Attributes\TaggedAs;

interface RuleInterface {}

#[Tag(name: 'tags.rules', priority: 10)]
class RuleA implements RuleInterface {}

#[Tag(name: 'tags.rules')]
class RuleB implements RuleInterface {}

#[Tag(name: 'tags.rules', priority: 100)]
class RuleC {} implements RuleInterface {}

class Rules {

    public function __construct(
        #[TaggedAs('tags.rules')]
        private iterable $rules
    ) {}

}
```

```php
use function Kaspi\DiContainer\diAutowire;

$definitions = [

   diAutowire(App\Rules\RuleA::class),

   diAutowire(App\Rules\RuleB::class),

   diAutowire(App\Rules\RuleC::class),

];
// –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Rules::$rules –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
// 1 - RuleC - priority === 100
// 2 - RuleA - priority === 10
// 3 - RuleB - priority === null
```

### `priorityMethod` –∏ `priorityDefaultMethod` –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
–£–∫–∞–∑–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–µ–≥–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `priority` –º–æ–∂–Ω–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º —Å–ø–æ—Å–æ–±–∞–º–∏ –µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —è–≤–ª—è–µ—Ç—Å—è php-–∫–ª–∞—Å—Å–æ–º:

- `priorityMethod` ‚Äì –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π `priority` —É —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ php –∫–ª–∞—Å—Å–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ —Ç–µ–≥–∞;
- `priorityDefaultMethod` ‚Äì –º–µ—Ç–æ–¥ —É–∫–∞–∑–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑
[—Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏—é `diTaggedAs`](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#ditaggedas)
–∏–ª–∏ —á–µ—Ä–µ–∑ [php –∞—Ç—Ä–∏–±—É—Ç #[TaggedAs]](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#taggedas)
–∫–æ—Ç–æ—Ä—ã–π **–º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω** –≤ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º php –∫–ª–∞—Å—Å–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π `priority`.
 
#### üêò –í —Å—Ç–∏–ª–µ php –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–µ `$options` ‚Äì —É–∫–∞–∑–∞–≤ –≤ –º–∞—Å—Å–∏–≤–µ –∫–ª—é—á `priority.method` [—É –º–µ—Ç–æ–¥–∞ `bindTag`](#-–æ–±—ä—è–≤–ª–µ–Ω–∏–µ-—Ç–µ–≥–∞-–≤-—Å—Ç–∏–ª–µ-php-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π)
–∫–∞–∫ —É–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:
```php
['priority.method' => 'methodName']
```
–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è `priority.method`:
```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
namespace App\Rules;

interface RuleInterface {
    public static function getPriority(): int;
}

class RuleA implements RuleInterface {

    public static function getPriority(): int {
        return 10;
    }

}

class RuleB implements RuleInterface {

    public static function getPriority(): int {
        return 0;
    }

}

class RuleC {

    public static function getPriorityForCollection(string $tag): string|int|null {
        return match ($tag) {
            'tags.rules' => 100,
            'tags.other-name' => 'GROUP100:0001',
            default => null,
        };
    }

}
```

```php
use function \Kaspi\DiContainer\diAutowire;
use function \Kaspi\DiContainer\diTaggedAs;

$definitions = [
   diAutowire(App\Rules\RuleA::class) // —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ RuleInterface::getPriority
        ->bindTag(
            name: 'tags.rules',
            options: ['priority.method' => 'getPriority']
        ),

   diAutowire(App\Rules\RuleB::class) // —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ RuleInterface::getPriority
        ->bindTag(
            name: 'tags.rules',
            options: ['priority.method' => 'getPriority']
        ),

   diAutowire(App\Rules\RuleC::class)
        ->bindTag(name: 'tags.rules'), // –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º —è–≤–Ω–æ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ –ø–æ–ª—É—á–∞—Ç—å `priority`
                                       // –º–µ—Ç–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –≤ `diTaggedAs`.

    diAutowire(App\Rules\Rules::class)
        ->bindArguments(
            rules: diTaggedAs(
                'tags.rules',
                // –µ—Å–ª–∏ –Ω–µ—Ç `priority` –∏ `priority.method`
                // –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ - className::getPriorityForCollection() 
                priorityDefaultMethod: 'getPriorityForCollection'
            )
        )
];
// –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Rules::$rules –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
// 1 - RuleC::getPriorityForCollection() === 100
// 2 - RuleA::getPriority() === 10
// 3 - RuleB::getPriority() === 0
```
### #Ô∏è‚É£ –ß–µ—Ä–µ–∑ php –∞—Ç—Ä–∏–±—É—Ç—ã

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç `$priorityMethod` —É php –∞—Ç—Ä–∏–±—É—Ç–∞ `#[Tag]`
–∫–∞–∫ —É–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:

```php
namespace App\Rules;

use Kaspi\DiContainer\Attributes\Tag;
use Kaspi\DiContainer\Attributes\TaggedAs;

#[Tag(name: 'tags.rules', priorityMethod: 'getPriority')]
class RuleA {

    public static function getPriority(): int {
        return 10;
    }

}

#[Tag(name: 'tags.rules', priorityMethod: 'getPriority')]
class RuleB {

    public static function getPriority(): int {
        return 0;
    }

}

// üö© –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è priority –∏ priorityMethod
// –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω —á–µ—Ä–µ–∑ priorityDefaultMethod
#[Tag(name: 'tags.rules')]
class RuleC {

    public static function getPriorityForCollection(string $tag): string|int|null {
        return match ($tag) {
            'tags.rules' => 100,
            'tags.other-name' => 'GROUP100:0001',
            default => null,
        };
    }

}

class Rules {

    public function __construct(
        #[TaggedAs(
            'tags.rules',
            // –µ—Å–ª–∏ –Ω–µ –æ–±—ä—è–≤–ª–µ–Ω `priority` –∏ `priorityMethod`
            // —Ç–æ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ `getPriorityForCollection` —É —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞
            priorityDefaultMethod: 'getPriorityForCollection'
        )]
        private iterable $rules
    ) {}

}

$definitions = [

   diAutowire(App\Rules\RuleA::class),

   diAutowire(App\Rules\RuleB::class),

   diAutowire(App\Rules\RuleC::class),

];
// –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
// 1 - RuleC::getPriorityForCollection() === 100
// 2 - RuleA::getPriority() === 10
// 3 - RuleB::getPriority() === 0 
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (_container identifier - –Ω–µ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞_).

> ‚ö† –ï—Å–ª–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ
> –∫–ª—é—á–∏, —Ç–æ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é –ø–æ–ø–∞–¥—ë—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (`priority`),
> –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å —Ç–∞–∫–∏–º –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ–º –∫–ª—é—á–∞ –±—É–¥—É—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω—ã.

"–õ–µ–Ω–∏–≤–∞—è" (`$isLazy = true`) –∫–æ–ª–ª–µ–∫—Ü–∏—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:

- `\Iterator`
- `\Psr\Container\ContainerInterface`
- `\ArrayAccess`
- `\Countable` 

—á—Ç–æ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –∫–æ–ª–ª–µ–∫—Ü–∏–∏
–ø–æ –∏–º–µ–Ω–∞–º –∫–ª—é—á–µ–π –≤ —Å—Ç–∏–ª–µ php –º–∞—Å—Å–∏–≤–æ–≤ –∏–ª–∏ –≤ —Å—Ç–∏–ª–µ `ContainerInterface`

–ü—Ä–∏–º–µ—Ä –¥–æ—Å—Ç—É–ø–∞ –ø–æ –∏–º–µ–Ω–∏ –∫–ª—é—á–∞:
```php
use Kaspi\DiContainer\Attributes\TaggedAs;
use Kaspi\DiContainer\Attributes\Tag

#[Tag('tags.tag_one', options: ['key_as' => 'write'])]
class DoWrite {}

#[Tag('tags.tag_one', options: ['key_as' => 'read'])]
class DoRead {}

class TaggedServices {
    public function __construct(
        #[TaggedAs('tags.tag_one', key: 'key_as')]
        private iterable $items
    ) {}
    
    // –ö–ª—é—á –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ 'write' –∏–ª–∏ 'read' –≤—ã–∑–æ–≤–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π
    // —ç–ª–µ–º–µ–Ω—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–∏
    public function doIt(string $name) {
        // –≤ —Å—Ç–∏–ª–µ ContainerInterface
        $class = $this->items->get($name);
        // –≤ —Å—Ç–∏–ª–µ php –º–∞—Å—Å–∏–≤–∞
        $class = $this->items[$name];
    }
}
```
üìù [–ø—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞ –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–∞](#–∫–ª—é—á-–≤-–∫–æ–ª–ª–µ–∫—Ü–∏–∏-–∏–∑-–º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö-—Ç–µ–≥–∞-–∫–∞–∫-–Ω–µ–ø—É—Å—Ç–∞—è-—Å—Ç—Ä–æ–∫–∞)

> ‚Ñπ –í —Å—Ç–∏–ª–µ php –º–∞—Å—Å–∏–≤–æ–≤ —Ç–∞–∫ –∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
> —Ñ—É–Ω–∫—Ü–∏–∏ `isset`, `count`. –í —Å—Ç–∏–ª–µ `ContainerInterface`
> –¥–æ—Å—Ç—É–ø–Ω—ã –º–µ—Ç–æ–¥—ã `has` –∏ `get`

> üí• –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–º—É –∫–ª—é—á—É
> –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑—É—é—â–µ–µ
> –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Psr\Container\NotFoundExceptionInterface`.

### –ö–ª—é—á –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∫–∞–∫ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ.
–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª (_–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç –Ω—É–ª—è –∏ –±–æ–ª—å—à–µ_)
–Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–µ `$useKeys=false`.

–î–ª—è —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ `diTaggedAs`:

```php
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

$definition = [
    diAutowire(ClassTaggedAs::class)
        ->bindArguments(
            diTaggedAs('tags.tag_one', useKeys: false) // –∫–ª—é—á–∏ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ –æ—Ç 0 –¥–æ n
        )
];
```
–î–ª—è php –∞—Ç—Ä–∏–±—É—Ç–∞ `#[TaggedAs]`:
```php
use Kaspi\DiContainer\Attributes\TaggedAs;

class ClassTaggedAs {
    public function __construct(
        #[TaggedAs('tags.tag_one', useKeys: false)] // –∫–ª—é—á–∏ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞
        private iterable $items
    ) {}
}
```
### –ö–ª—é—á –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–∞ –∫–∞–∫ –Ω–µ–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞.
–ü—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ç–µ–≥–∞ –∫ –Ω–µ–º—É –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (_–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ_)
—á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç `$options`.
–î–ª—è –∑–∞–º–µ–Ω—ã –∫–ª—é—á–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ –¥—Ä—É–≥–æ–µ —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–µ `$key` –∏–º—è –∫–ª—é—á–∞ –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–∞.

üêò –î–ª—è —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ `diTaggedAs`:

```php
use function Kaspi\DiContainer\{diAutowire, diTaggedAs};

class ClassTaggedAs {
    public function __construct(
        private iterable $items
    ) {}
    
    public function doFoo() {
        $this->items->get('foo'); // –≤ —Å—Ç–∏–ª–µ ContainerInterface
    }
    
    public function doBaz() {
        $this->items['baz']; // –≤ —Å—Ç–∏–ª–µ php –º–∞—Å—Å–∏–≤–∞
    }
}

// ...

$definition = [
    diAutowire(ServiceOne::class)
        ->bindTag('tags.tag_one', options: ['key_as' => 'foo']),
    
    diAutowire(ServiceTwo::class)
        ->bindTag('tags.tag_one', options: ['key_as' => 'baz']),

    diAutowire(ClassTaggedAs::class)
        ->bindArguments(
            diTaggedAs('tags.tag_one', key: 'key_as') // –∫–ª—é—á –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–∞
        ),
];
```
#Ô∏è‚É£ –î–ª—è php –∞—Ç—Ä–∏–±—É—Ç–∞ `#[TaggedAs]`:
```php
use Kaspi\DiContainer\Attributes\TaggedAs;
use Kaspi\DiContainer\Attributes\Tag;

#[Tag('tags.tag_one', options: ['key_as' => 'foo'])]
class ServiceOne {}

#[Tag('tags.tag_one', options: ['key_as' => 'baz'])]
class ServiceTwo {}

class ClassTaggedAs {
    public function __construct(
        #[TaggedAs('tags.tag_one', key: 'key_as')] // –∫–ª—é—á –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–∞
        private iterable $items
    ) {}
    
    public function doFoo() {
        $this->items->get('foo'); // –≤ —Å—Ç–∏–ª–µ ContainerInterface
    }
    
    public function doBaz() {
        $this->items['baz']; // –≤ —Å—Ç–∏–ª–µ php –º–∞—Å—Å–∏–≤–∞
    }
}

// ...

$definition = [
    diAutowire(ServiceOne::class),
    
    diAutowire(ServiceTwo::class),
];
```
‚öñ –ü—Ä–∏–º–µ—Ä –ø–æ–≤–µ–¥–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∫–ª—é—á–µ–π —Å–æ–≤–ø–∞–¥–∞—é—Ç:
```php
use Kaspi\DiContainer\Attributes\TaggedAs;
use Kaspi\DiContainer\Attributes\Tag;

#[Tag('tags.tag_one', options: ['key_as' => 'foo'])]
class ServiceOne {}

#[Tag('tags.tag_one', options: ['key_as' => 'foo'], priority: 100)]
class ServiceTwo {}

class ClassTaggedAs {
    public function __construct(
        #[TaggedAs('tags.tag_one', key: 'key_as')] // –∫–ª—é—á –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–∞
        private iterable $items
    ) {}
}
```
‚Ñπ —Ç–∞–∫ –∫–∞–∫ –æ–±–∞ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–≤ `$options`) –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è `'key_as' => 'foo'`,
—Ç–æ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ —Å–≤–æ–π—Å—Ç–≤–æ `ClassTaggedAs::$items` –ø–æ —Ç–µ–≥—É –±—É–¥–µ—Ç —É—á—Ç—ë–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (`priority`). –£ –∫–ª–∞—Å—Å–∞ `ServiceTwo`
–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç `100`, –∞ —É –∫–ª–∞—Å—Å–∞ `ServiceOne` –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω ‚Äì —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∫–ª—é—á–∞—Ö —É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
–≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é –ø–æ–ø–∞–¥—ë—Ç —Ç–æ–ª—å–∫–æ `ServiceTwo` —É –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç `100`.

### –ö–ª—é—á –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–∞ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞.
–ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∞—Ç—å –∫–ª—é—á –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, —Ç–æ –¥–ª—è php –∫–ª–∞—Å—Å–∞ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Ç–æ–¥
—á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–ª—é—á–∞ –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
–ß—Ç–æ–±—ã –æ–±—ä—è–≤–∏—Ç—å –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —á—Ç–æ–±—ã —Å—Ç—Ä–æ–∫–∞ –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ –Ω–∞—á–∏–∞–ª–∞—Å—å —Å `self::`
–∏ –ø–æ—Å–ª–µ –¥–≤–æ–µ—Ç–æ—á–∏—è –∏–º—è –º–µ—Ç–æ–¥–∞ –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞ –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏.

–ü—Ä–∏–º–µ—Ä –∫–ª—é—á–∞ –∏–∑ –º–µ—Ç–æ–¥–∞:
`['some_key' =>'self::methodName']`.

‚ö† –ú–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω –∫–∞–∫ `public static function` –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–∏–ø `string`.
–í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:
 - `string $tag` - –∏–º—è —Ç–µ–≥–∞;
 - `array $options` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ–≥–∞;

–ü—Ä–∏–º–µ—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–∞ —É –∫–ª–∞—Å—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:
```php
use Kaspi\DiContainer\Attributes\TaggedAs;
use Kaspi\DiContainer\Attributes\Tag;

#[Tag('tags.tag_one', options: ['key_as' => 'self::getKey'])] // üö© –∫–ª—é—á –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–∑ –º–µ—Ç–æ–¥–∞ –∫–ª–∞—Å—Å–∞
#[Tag('tags.simplest', options: ['key_as' => 'self::getKey'])]
class ServiceOne {
    public static function getKey(string $tag): string {
        return match($tag) {
            'tags.tag_one' => 'qux',
            default => 'bar'
        }
    }
}

#[Tag('tags.tag_one', options: ['key_as' => 'foo'])]
class ServiceTwo {}

class ClassTaggedAs {
    public function __construct(
        #[TaggedAs('tags.tag_one', key: 'key_as')] // –∫–ª—é—á –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–∞
        private iterable $items
    ) {}
}
```
‚Ñπ –ø—Ä–∏ —Ç–∞–∫–æ–º –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è –≤ —Å–≤–æ–π—Å—Ç–≤–µ `ClassTaggedAs::$items` –∫–ª–∞—Å—Å `ServiceOne` –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∫–ª—é—á `qux` –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ –º–µ—Ç–æ–¥–∞ `ServiceOne::getKey()`,
–∫–ª–∞—Å—Å `ServiceTwo` –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∫–ª—é—á `foo` –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–∞ (_–∑–Ω–∞—á–µ–Ω–∏—è –≤ `$options`_).

### –ö–ª—é—á –∏–∑ –º–µ—Ç–æ–¥–∞ –∫–ª–∞—Å—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
–¢–∞–∫ –∂–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –¥–ª—è php –∫–ª–∞—Å—Å–∞ —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏,
–µ—Å–ª–∏ —É —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω –∫–ª—é—á –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (_–≤ `$options`_).

–£–∫–∞–∑–∞—Ç—å –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–∂–Ω–æ –≤ –∞–≥—Ä—É–º–µ–Ω—Ç–µ
`$keyDefaultMethod` [–≤ —Ö—ç–ª–ø–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ diTaggedAs](https://github.com/agdobrynin/di-container/blob/main/docs/01-php-definition.md#ditaggedas)
–∏–ª–∏ —É [php –∞—Ç—Ä–∏–±—É—Ç–∞ #[TaggedAs]](https://github.com/agdobrynin/di-container/blob/main/docs/02-attribute-definition.md#taggedas).

‚ö† –ú–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω –∫–∞–∫ `public static function` –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–∏–ø `string`.
–í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:
- `string $tag` - –∏–º—è —Ç–µ–≥–∞;
- `array $options` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ–≥–∞;

–ü—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:
```php
use Kaspi\DiContainer\Attributes\TaggedAs;
use Kaspi\DiContainer\Attributes\Tag;

class ServiceOne implements ServiceInterface {
    public static function getServiceKey(): string {
        return 'bar';
    }
}

class ServiceTwo implements ServiceInterface {
    public static function getServiceKey(): string {
        return 'foo';
    }
}

class ClassTaggedAs {
    public function __construct(
        #[TaggedAs(ServiceInterface::class, priorityDefaultMethod: 'getServiceKey')]
        private iterable $items
    ) {}
}
```
‚Ñπ –ø—Ä–∏ —Ç–∞–∫–æ–º –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è –≤ —Å–≤–æ–π—Å—Ç–≤–µ `ClassTaggedAs::$items` –∫–ª–∞—Å—Å `ServiceOne` —Å –∫–ª—é—á—ë–º `bar` –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ –º–µ—Ç–æ–¥–∞ `ServiceOne::getServiceKey()`,
`ServiceTwo` —Å –∫–ª—é—á—ë–º `foo` –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ –º–µ—Ç–æ–¥–∞ `ServiceTwo::getServiceKey()`.
